<!-- task_detail.html -->
{% extends "base.html" %}
{% load staticfiles %}

{% block content_container %}

<div class="row">
    <div class="col-md-10 col-md-offset-1">
        <a href="{% url 'view_prototype' prototype_project.id %}" class="static_a_display lead"> <button class="btn btn-xs"> <i class="fa fa-caret-left"></i> {{ prototype_project }}</button></a>
        <h3>{{ prototype_project }} Tasks 
            {% if user == prototype_project.creator or user_is_coeditor %}
            <a href="{% url 'create_task' prototype_project.id %}"><button id="addbtn" class="btn btn-xs btn-success"><i class="fa fa-plus"></i> add a task </button></a>
            {% endif %}
        </h3>
    </div>
</div>
<div class="row">
    <div class="col-sm-4 col-sm-offset-1 block-center" role="tabpanel">

        <ul class="nav nav-pills nav-stacked">
        {% for i in task_list %}
            {% ifchanged i.get_task_category_display %}
                <h4> {% if not i.get_task_category_display %}<small>No category specified</small>{% else %}{{ i.get_task_category_display }}{% endif %}
                </h4>

            {% endifchanged %}

            <li role="presentation" class="{% if i.id == project_task.id %}active{% endif %}">
                <a href="#task_detail_{{i.id}}" aria-controls="task_detail_{{i.id}}" role="tab" data-toggle="tab" class="static_a_display">
                    <span>{{ forloop.counter }}. {{ i.title }}</span>
                </a>
            </li>
        {% empty %}
            <li>No tasks have been created yet.</li>
        {% endfor %}
        </ul>
    </div>

    <div class="col-sm-6 tab-content">


        {% for i in task_list %}
        <div id="task_detail_{{i.id}}" class="affix tab-pane {% if i.id == project_task.id %}active{% endif %}" role="tabpanel"  >
            <h3>
                {% if user == i.prototype_project.creator or user_is_coeditor %}
                <a href="{% url 'update_task' i.prototype_project.id i.id %}" class="static_a_display">
                    <button class="btn btn-xs"><i class="fa fa-pencil"></i> edit</button>
                </a>

                <a href="{% url 'delete_task' i.prototype_project.id i.id %}" class="static_a_display">
                    <button class="btn btn-xs"><i class="fa fa-close"></i> remove</button>
                </a>
                {% endif %}
            </h3>

            {% if i.title %}<p><span class="lead text-primary" style="padding: 5px">{{ i.title }}</span></p>{% endif %}
            <dl class="dl-horizontal">
                {% if i.description|safe %}<dt>Task Description:</dt><dd> {{ i.description|safe }} </dd>{% endif %}
                {% if i.task_type %}<dt>Task Type:</dt> <dd>{{ i.task_type }} </dd>{% endif %}
                {% if i.task_focus %}<dt>Task Focus:</dt> <dd>{{ i.task_focus|safe }} </dd>{% endif %}
                {% if i.task_time %}<dt>Task Time:</dt> <dd>{{ i.task_time }} </dd>{% endif %}
                {% if i.task_extensions %}<dt>Task Extension:</dt> <dd>{{ i.task_extensions|safe }} </dd>{% endif %}
                {% if i.technology_tips %}<dt>Technology Tips:</dt> <dd>{{ i.technology_tips|safe }} </dd>{% endif %}
                {% if i.potential_hurdles %}<dt>Potential Hurdles:</dt> <dd>{{ i.potential_hurdles|safe }} </dd>{% endif %}
            </dl>
        </div>
        {% endfor %}

    </div>
</div>

{% endblock content_container %}