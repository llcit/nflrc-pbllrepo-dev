<!-- project_prototype_detail.html -->
{% extends "base.html" %}
{% load staticfiles %}

{% block content_container %}

<div class="row">
    <div class="col-md-4 col-md-offset-1">
        <p>
            <a href="{% url 'list_prototypes' %}" class="static_a_display">
                <button class=" btn btn-xs"><i class="fa fa-caret-left"></i> browse <i class="fa fa-list"></i></button>
            </a>
        </p>
        <p class="lead">


            {{ project_prototype.title }}
            <a href="{% url 'docview_prototype' project_prototype.id %}" class="static_a_display">
                <button class="btn btn-xs"><i class="fa fa-file-text-o"></i> view</button>
            </a>
            <a href="{% url 'flip_prototype' project_prototype.id %}" class="static_a_display">
                <button class="btn btn-xs"><i class="fa fa-files-o"></i> flip</button>
            </a>

            {% if user == project_prototype.creator %}

            <a href="{% url 'update_prototype' project_prototype.id %}"class="static_a_display">
                <button class="btn btn-xs"><i class="fa fa-pencil"></i> edit</button>
            </a>

            <a href="{% url 'delete_prototype' project_prototype.id %}" class="static_a_display">
                <button class="btn btn-xs"><i class="fa fa-close"></i> remove</button>
            </a>

            {% endif %}


        </p>

        <p> by {{ project_prototype.creator }} </p>
        {% if project_prototype.origin %}
        <p> derived from <a href="{% url 'view_prototype' project_prototype.origin.id %}">{{ project_prototype.origin }}</a></p></p>
        {% endif %}



        <dl class="dl-horizontal">
            <dt>description</dt> <dd><span> {{ project_prototype.description }} </span></dd>
            <dt>publisher</dt><dd><span> {{ project_prototype.publisher }} </span></dd>
            <dt>publish_date</dt><dd><span> {{ project_prototype.publish_date }} </span></dd>
            <dt>Contributors:</dt><dd><span> {{ project_prototype.contributors }} </span></dd>
            <dt>copyright</dt><dd><span> {{ project_prototype.rights }} </span></dd>
            <dt>uri</dt><dd><span> {{ project_prototype.uri }} </span></dd>

            {% for i, j in prototype_data.items %}
                {% ifchanged j.metaprefix %}<h4> {{ j.metaprefix }} </h4> {% endifchanged %}
                {% if not j.displayname %}
                    <dt></dt><dd>{% for k in j.datalist %}<span>{{ k }}</span>{% if not forloop.last %},{% endif %} {% endfor %}</dd>
                {% else %}
                    <dt style="white-space: normal">
                        {{ j.displayname }}
                    </dt>
                    <dd>{% for k in j.datalist %}<span>{{ k }}</span>{% if not forloop.last %},{% endif %} {% endfor %}</dd>
                {% endif %}
            {% endfor %}
        </dl>
    </div>

    <div class="col-md-4 col-md-offset-1">
        <p>
            <a href="{% url 'create_task' project_prototype.id %}" class="static_a_display">
                <button class=" btn btn-xs btn-success"> add a task</i></button>
            </a>
            <a href="{% url 'view_all_tasks' project_prototype.id %}" class="static_a_display">
                <button class=" btn btn-xs"> view all <i class="fa fa-list"></i></button>
            </a>
        </p>
        <p class="lead">
            {{ project_prototype.title }} Tasks
        </p>

        <ul class="list-unstyled">
            {% for i in prototype_tasks %}
                <li>
                    <p>

                    <a href="{% url 'view_task' project_prototype.id i.id %}" class="static_a_display">
                        <h4 class="">{{ forloop.counter }}. {{ i }}</h4>
                    </a>
                    </p>

                    {% if user == project_prototype.creator %}
                    <p>
                    <a href="{% url 'update_task' project_prototype.id i.id %}"class="static_a_display">
                        <button class="btn btn-xs"><i class="fa fa-pencil"></i> edit</button>
                    </a>

                    <a href="{% url 'delete_task' project_prototype.id i.id %}" class="static_a_display">
                        <button class="btn btn-xs"><i class="fa fa-close"></i> remove</button>
                    </a>
                    </p>
                    {% endif %}

                </li>
            {% endfor %}
        </ul>
    </div>
</div>


{% endblock content_container %}